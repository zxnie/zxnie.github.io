<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Introduction This is a write-up of my course project for EEL6509: Wireless Communications, Fall 2018.
Device-to-Device (D2D) communication was initially proposed in cellular networks as a new paradigm to improve network performance. The emergence of new services such as content distribution and location-aware advertisement introduced new use cases for D2D communications in cellular networks. The initial studies showed that D2D communication has advantages such as increasing spectrum efﬁciency and reducing communication delay.'>
<meta name='theme-color' content='#0078d7'>

<meta property='og:title' content='Simulate inband device-to-device communications underlay with cellular network with MATLAB • Zixiang&#39;s Homepage'>
<meta property='og:description' content='Introduction This is a write-up of my course project for EEL6509: Wireless Communications, Fall 2018.
Device-to-Device (D2D) communication was initially proposed in cellular networks as a new paradigm to improve network performance. The emergence of new services such as content distribution and location-aware advertisement introduced new use cases for D2D communications in cellular networks. The initial studies showed that D2D communication has advantages such as increasing spectrum efﬁciency and reducing communication delay.'>
<meta property='og:url' content='http://zxnie.github.io/posts/d2d-pairing/'>
<meta property='og:site_name' content='Zixiang&#39;s Homepage'>
<meta property='og:type' content='article'><meta property='article:section' content='posts'><meta property='article:tag' content='D2D'><meta property='article:tag' content='Cellular'><meta property='article:tag' content='Wireless communications'><meta property='article:tag' content='MATLAB'><meta property='article:published_time' content='2019-01-23T14:30:29-05:00'/><meta property='article:modified_time' content='2019-01-23T14:30:29-05:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.53" />

  <title>Simulate inband device-to-device communications underlay with cellular network with MATLAB • Zixiang&#39;s Homepage</title>
  <link rel='canonical' href='http://zxnie.github.io/posts/d2d-pairing/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.4a10984a.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#0078d7;}
</style>

  

</head>
<body class='page type-posts has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
    Zixiang&#39;s Homepage
    </h2>
    <div class='desc'>
    Electrical and Computer Engineer
    </div>
  </header>

</section>
<section class='widget widget-search sep-after'>
  <header>
    <h4 class='title widget-title'>Search</h4>
  </header>

  <form action='/search' id='search-form' class='search-form'>
    <label>
      <span class='screen-reader-text'>Search</span>
      <input id='search-term' class='search-term' type='search' name='q' placeholder='Search&hellip;'>
    </label></form>

</section>
<section class='widget widget-taxonomy_cloud sep-after'>
  <header>
    <h4 class='title widget-title'>Tags</h4>
  </header>

  <div class='container list-container'>
  <ul class='list taxonomy-cloud'><li>
        <a href='/tags/cellular/' style='font-size:1em'>Cellular</a>
      </li><li>
        <a href='/tags/d2d/' style='font-size:1em'>D2D</a>
      </li><li>
        <a href='/tags/dos/' style='font-size:1em'>DoS</a>
      </li><li>
        <a href='/tags/matlab/' style='font-size:1em'>MATLAB</a>
      </li><li>
        <a href='/tags/sdn/' style='font-size:1em'>SDN</a>
      </li><li>
        <a href='/tags/security/' style='font-size:1em'>Security</a>
      </li><li>
        <a href='/tags/wireless-communications/' style='font-size:1em'>Wireless communications</a>
      </li></ul>
</div>


</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='https://zxnie.github.io'>Home</a>
      </li><li class='item'>
        <a href='https://github.com/zxnie'>Repo</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Zixiang&#39;s Homepage</p><p class='desc site-desc'>Electrical and Computer Engineer</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Simulate inband device-to-device communications underlay with cellular network with MATLAB</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2019-01-23T14:30:29-05:00'>2019, Jan 23</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
6 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<h3 id="introduction">Introduction</h3>

<p>This is a write-up of my course project for EEL6509: Wireless Communications, Fall 2018.<br />
Device-to-Device (D2D) communication was initially proposed in cellular networks as a new paradigm to improve network performance. The emergence of new services such as content distribution and location-aware advertisement introduced new use cases for D2D communications in cellular networks. The initial studies showed that D2D communication has advantages such as increasing spectrum efﬁciency and reducing communication delay. 3GPP has proposed Device-to-Device (D2D) communication in the LTE-Advanced (LTE-A) framework, which aims to improve user experiences and resource utilization by utilizing users’ proximity to each other. This project is based on Wang, Li, and Huaqing Wu. &ldquo;Fast pairing of device-to-device link underlay for spectrum sharing with cellular users.&rdquo; IEEE Communications Letters 18.10 (2014): 1803-1806 [1].<br />
All the codes are available here: <a href="https://github.com/zxnie/course_projects/tree/eel6509fall2018" target="_blank">Github repo</a>.</p>

<h3 id="scenario-description">Scenario description</h3>

<p>The majority research works about D2D communications in cellular networks seek to use the cellular spectrum for both D2D and cellular communications (i.e., underlay inband D2D). This method need to mitigate interference between D2D and cellular communication so that D2D link will not impact other cellular users. The referenced paper of this project is exactly base their work on this scenario.<br />
<img src="/images/2019-01-23-underlay.png" alt="Current categories of D2D communications" style="height:250px;"><br />
Fig. 1 Current categories of D2D communications [2].<br />
Besides that, in order to avoid the above interference issue, some research propose to give dedicated part of the cellular resources to D2D communications (i.e., overlay inband D2D). Other researchers propose to adopt outband rather than inband resources so that the precious cellular spectrum may not be affected by D2D communications (as shown in Fig. 1).<br />
<img src="/images/2019-01-23-scenario.png" alt="Scenario description" style="height:250px;"><br />
Fig. 2. Scenario description.<br />
Fig. 2 describes the scenario of the simulation. M D2D links coexist with N CUEs using N orthogonal channel. The D2D link will share an <strong>uplink</strong> resource block of CUE. Here the &ldquo;D2D link&rdquo; contains two user entities, and they have been associated with each other on the D2D link. They need BS to allocate a resource block for their D2D communications for sharing. In addition, we assume that the nodes in the scene are usually stationary or move at medium speed to allow channel state information (CSI) to be obtained.<br />
Other notations are:</p>

<ul>
<li>Every active CUE uses one unit of uplink resource blocks.<br /></li>
<li>Each D2D link is to share at most one unit of resource block assigned to a particular CUE.<br /></li>
<li>BS in charge of pairing D2D link and CUE for spectrum sharing could obtain the following information:<br />

<ul>
<li>Background noise level \(\sigma_N^2\).</li>
<li>Uplink gain between CUE \(i\) and the BS denated as \(g_{i,B}\) and channel gain of D2D link \(j\), denoted as \(g_j\).<br /></li>
<li>Channel gains of interference links, from the transmitter of D2D link \(j\) to the BS, \(h_{j,B}\).<br /></li>
<li>Transmit powers of CUE\(i\): \(P_i^c\) andD2D\(j\): \(P_j^d\).<br /></li>
<li>Channel gain \(h_{i,j}\) from CUE \(i\) to D2D link \(j\).<br /></li>
</ul></li>
</ul>

<h3 id="pairing-algorithm">Pairing algorithm</h3>

<p>As shown in Fig. 2, for each uplink of CUE, the receiver is the BS. After paring with a D2D link, the interference could be co-channel from the D2D transmitter in the D2D link. Likewise, for each D2D link, after pairing with a CUE uplink block, the interference could be co-channel from that CUE to BS. Since the BS could get transmission parameters from CUE and D2D devices (mentioned in above section), BS could calculate SINR of CUE uplink (at BS) and D2D link (at D2D receiver), which could further be used to calcualte shannon rate.<br />
<img src="/images/2019-01-23-algorithm.png" alt="Pairing algorithm" style="height:500px;"><br />
Fig. 3. Pairing algorithm from paper [1].<br />
In above algorithm, we first create a pairing indicator matrix q(M×N). Initially, all element in this matrix is zero. If q(1,1) = 1, this means D2D link 1 has paired with CUE 1. Then we need a CUE set \(C\) and D2D link set \(D\) (Two complex number array with length N and M). I referenced this <a href="https://github.com/mathwuyue/d2dsimulator" target="_blank">Github repo</a> to create them. Here, I regard D2D users as CUE as well. Thus, there will be N(pure CUEs) + M × 2 (D2D users) CUEs in total.<br />
After that, we calculate each SINR at BS (from each CUE) with each D2D transmmiter. That is, assume each D2D link pair with each CUE respectively, and calculate each SINR at BS (D2D transmmision signal is the co-channel interference). So, there will be a SINR matrix with size M×N. Then, we can filter out those pairings with SINR under the BS threshold and get a candidate list. Moreover, at D2D receiver, we calcualte SINR again, but this time, CUE transmmision signal is the co-channel interference. Again, we could filter out those pairings with SINR under the D2D threshold. By this, we further shrink the candidate list.<br />
After we get the candidate list, we make the pairing decision by the popularity of each D2D link, that is, let each D2D link get fairly chance to get paired. As mentioned above, each CUE could only pair with one D2D link and each D2D link could only pair with one CUE. To achieve the algorithm, we need to create a poplularity list counting the times that each D2D link is selected to get paired. Then, for each each CUE, it will have a candidate list (each column in candidate matrix), sort the list with the popularity value and pair with the one D2D link with least popularity.<br />
After making the pairing decision, we calculate the shannon rate and sum them up, including the CUE-BS uplink rate and D2D link rate after pairing. Apperently, the CUE-BS uplink will be reduced, however, the D2D links compensate the overall sum rate, make the sum rate higher than it before pairing.</p>

<h3 id="result">Result</h3>

<p><img src="/images/2019-01-23-result1.png" alt="Overall sum rate vs CUE number (P_i^c = 500mW, M = 30)" style="height:400px;"><br />
Fig. 4. Overall sum rate vs CUE number (P_i^c = 500mW, M = 30).<br />
Fig. 4 give the overall sum rate vs number of CUEs with different combination of Ms and CUE transmission power \(P_i^c\). With increase of CUE users, the whole cell got higher sum rate. Also, the introduce of D2D links do help with the sum rate because in three pairs of experiment, all those with D2D scenarios have higher sum rate than those without D2D’s. However, more D2D links doesn’t help much with the overall sum rate. From the numerical results, increase M from 20 to 30 do helped with higher sum rate by less than 5 bits/Hz. If we put them in practice, i.e. let it times with 1.9GHz, it still a considerable improvement.<br />
<img src="/images/2019-01-23-result2.png" alt="Sum rate of D2D pairs vs number of D2D links" style="height:400px;"><br />
Fig. 5. Sum rate of D2D pairs vs number of D2D links.<br />
Here, I fix the number of CUEs in the cell to 140. Thus, when there are 30 D2D links in the cell, the sum of cellular users is 200, which is the typical capacity of urban metro cell. From the result (Fig. 5), more D2D links brings higher overall sum rate except for \(P_j^d\) = 125mW with 25 D2D links. Similarly, increase the transmission power of D2D transmitter could result in higher sum rate, but it consumes more power.</p>

<h3 id="future-work">Future work</h3>

<p>There are some issue unsolved in this simulation. First, how large is the memory of BS. As indicated in the algorithm, the BS is storing the popularity of each D2D link, how long will those data last in BS, do they have effective time?<br />
Second, I didn&rsquo;t use a realistic walking pattern in this simulation. So in this simulation, each loop re-calculate the localization of CUEs and D2D users. They are technically &ldquo;jumping&rdquo; around. In practice, their movement are not random like this.</p>

<h3 id="references">References</h3>

<p>[1] Wang, Li, and Huaqing Wu. &ldquo;Fast pairing of device-to-device link underlay for spectrum sharing with cellular users.&rdquo; IEEE Communications Letters 18.10 (2014): 1803-1806.<br />
[2] Asadi, Arash, Qing Wang, and Vincenzo Mancuso. &ldquo;A survey on device-to-device communication in cellular networks.&rdquo; IEEE Communications Surveys &amp; Tutorials 16.4 (2014): 1801-1819.</p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='/tags/d2d/'>D2D</a>, <a class='tag' href='/tags/cellular/'>Cellular</a>, <a class='tag' href='/tags/wireless-communications/'>Wireless communications</a>, <a class='tag' href='/tags/matlab/'>MATLAB</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/posts/ddos-on-sdn/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Perform DoS attacks on Software-defined Networking with mininet and ONOS</a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/zxnie' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:nzx93116@hotmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2016-2019 Zixiang Nie </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__public_path__='\/assets\/js\/'</script>

<script src='/assets/js/main.fae8ed32.js'></script><script src='/js/custom.js'></script><link rel='stylesheet' href='//unpkg.com/katex/dist/katex.min.css'>
<script src='//unpkg.com/katex/dist/katex.min.js'></script>
<script src='//unpkg.com/katex/dist/contrib/auto-render.min.js'></script>

<script type='text/javascript'>
  renderMathInElement(document.querySelector('.entry-content'),{});
</script>

</body>

</html>

